/**
 * 梅花易数 - 总纲知识库
 */

import type { KnowledgeEntry } from '../../types/index.js';

export const generalKnowledge: KnowledgeEntry[] = [
  {
    id: 'meihua-general-1',
    destinyType: 'meihua',
    subCategory: 'general',
    title: '梅花易数体用断法总纲',
    content: `【体用为梅花易数核心】
体卦：代表问卦者本人，或所问之事的主体、己方。
用卦：代表外部环境、对方、客观条件。

【动爻决定体用位置】
动爻在下卦（1-3爻）：下卦为用，上卦为体。
动爻在上卦（4-6爻）：上卦为用，下卦为体。

【五行生克断吉凶——五个层次】
用生体：外部环境来扶助你，万事顺意，贵人相助，大吉。
比和：体用五行相同，力量均衡，事情顺遂，吉。
体克用：我克制外部，我有主动权，能掌控局面，吉（但需防内耗）。
体生用：我去生助外部，付出多收获少，需量力而行，平。
用克体：外部来克制我，阻力最大，守势为宜，凶。

【断事三要素】
1. 卦象（上下卦的五行属性与自然象）
2. 动爻（变化的根源，决定体用位置）
3. 互卦（上卦下三爻与下卦上三爻组成，反映中间过程）`,
    wuxing: ['木', '火', '土', '金', '水'],
    keywords: ['体卦', '用卦', '动爻', '体用', '生克', '吉凶', '梅花', '断法'],
  },
  {
    id: 'meihua-general-2',
    destinyType: 'meihua',
    subCategory: 'general',
    title: '梅花易数吉凶层次与问事要点',
    content: `【吉凶四个层次】
大吉（用生体）：上天眷顾，外部主动来助，机遇显现，事情最为顺利。
吉（比和或体克用）：自身有能力或外部配合，可以推进，注意时机把握。
平（体生用）：需要付出心血，但结果一般，可能回报不足所期，耐心守候。
凶（用克体）：外部环境不利，压力大阻力多，暂缓行动，否极泰来。

【问事要点与注意事项】
一问：明确所问具体事项（升职、感情、财运、决策等）
二问：起卦时间（梅花易数最重视起卦时间，应记录准确）
三断：结合卦象五行与体用关系得出结论

【八卦自然象辅助判断】
乾（天/金）：刚健、领导、父亲、权力
兑（泽/金）：喜悦、口才、女性、财物
离（火/火）：文明、热情、中年女性、眼睛
震（雷/木）：行动、震动、长男、惊吓
巽（风/木）：顺从、缓和、长女、进退
坎（水/水）：险陷、耳朵、中男、流动
艮（山/土）：止步、沉稳、少男、阻隔
坤（地/土）：顺从、柔和、母亲、积累`,
    wuxing: ['木', '火', '土', '金', '水'],
    keywords: ['吉凶', '层次', '问事', '大吉', '起卦', '八卦', '自然象', '时间'],
  },
  {
    id: 'meihua-general-3',
    destinyType: 'meihua',
    subCategory: 'general',
    title: '梅花时间起卦算法与卦象解读方法',
    content: `【邵雍时间起卦法】
上卦数 = (年 + 月 + 日) mod 8，余0取8
下卦数 = (年 + 月 + 日 + 时) mod 8，余0取8
动爻数 = (年 + 月 + 日 + 时) mod 6，余0取6

先天八卦数序：1=乾 2=兑 3=离 4=震 5=巽 6=坎 7=艮 8=坤

【卦象解读三步法】
第一步：确认上卦、下卦及其五行
第二步：根据动爻位置确定体用
第三步：用五行生克关系得出吉凶结论

【综合判断要则】
不可只看体用生克，还需结合：
- 卦象自然象（乾象征天、权力；坤象征地、顺从）
- 动爻的含义（震动变化的核心爻位）
- 问事的时间背景（时令五行会影响各卦的力量）`,
    wuxing: ['木', '火', '土', '金', '水'],
    keywords: ['起卦', '时间起卦', '先天八卦', '算法', '动爻', '三步法'],
  },
];

export function retrieve(_chartText: string, _query: string): KnowledgeEntry[] {
  return generalKnowledge;
}

export const entries = generalKnowledge;
